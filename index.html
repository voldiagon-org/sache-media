<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sache Media</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="https://www.svgrepo.com/show/374133/video.svg">
  <style>
    body { margin:0; font-family: 'Segoe UI',Arial,sans-serif; background: #111; color: #eee;}
    header { background: #1a1a1a; padding: 1rem 0; text-align: center; box-shadow: 0 2px 12px #0003;}
    .logo { font-size: 2rem; font-weight: bold; color: #fff; letter-spacing: 2px;}
    .accent { color: #1db954; }
    .container { max-width: 900px; margin: 2rem auto; background: #222; border-radius: 10px; box-shadow: 0 4px 24px #0005; padding: 2rem;}
    .upload-bar, .search-bar { display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem; }
    .upload-bar input[type="file"] { display: none; }
    .upload-btn { background: #1db954; color: #fff; border: none; padding: 0.7rem 1.3rem; border-radius: 5px; font-size: 1.1rem; cursor: pointer;}
    .search-bar input[type="text"] { flex: 1; padding: 0.7rem 1rem; border-radius: 5px; border: none; background: #2a2a2a; color: #fff; }
    .video-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: 2rem;}
    .video-card { background: #181818; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 12px #0005; position: relative; }
    .video-card video { width: 100%; display: block; background: #000;}
    .video-info { padding: 1rem; }
    .video-title { font-size: 1.1rem; font-weight: 500; margin-bottom: 0.5rem; word-break: break-all;}
    .like-btn { background: none; border: none; color: #1db954; font-size: 1.2rem; cursor: pointer; padding: 0; vertical-align: middle;}
    .like-count { color: #aaa; margin-left: 0.5rem; font-size: 1rem; }
    .timestamp { color: #666; font-size: 0.9em; float: right;}
    @media (max-width: 650px) {
      .container { padding: 0.5rem; }
      .video-info { padding: 0.7rem;}
      .video-grid { gap: 1rem;}
    }
  </style>
</head>
<body>
  <header>
    <span class="logo"><span class="accent">Sache</span> Media</span>
    <div style="font-size:1rem;color:#aaa;margin-top:0.3rem;">A YouTube-like social platform. No phone number needed!</div>
  </header>
  <div class="container">
    <form class="upload-bar" onsubmit="return false;">
      <label for="video-upload" class="upload-btn">Upload Video</label>
      <input type="file" id="video-upload" accept="video/*" />
    </form>
    <form class="search-bar" onsubmit="return false;">
      <input type="text" id="search-box" placeholder="Search videos...">
    </form>
    <div class="video-grid" id="video-grid"></div>
    <div id="no-videos" style="text-align:center; color:#555; margin-top:2rem; display:none;">No videos found.</div>
  </div>
  <script>
    // State: In-memory videos
    let videos = [
      {
        title: "Welcome to Sache Media!",
        src: "https://www.w3schools.com/html/mov_bbb.mp4",
        likes: 5,
        timestamp: new Date(Date.now()-86400000).toLocaleString()
      },
      {
        title: "Sample Cat Video",
        src: "https://www.w3schools.com/html/movie.mp4",
        likes: 2,
        timestamp: new Date(Date.now()-3600000).toLocaleString()
      }
    ];

    // Render
    function renderVideos(filter = '') {
      const grid = document.getElementById('video-grid');
      grid.innerHTML = '';
      const filtered = videos.filter(v => v.title.toLowerCase().includes(filter.toLowerCase()));
      if(filtered.length === 0) {
        document.getElementById('no-videos').style.display = '';
        return;
      } else {
        document.getElementById('no-videos').style.display = 'none';
      }
      filtered.forEach((v, i) => {
        const card = document.createElement('div');
        card.className = 'video-card';
        card.innerHTML = `
          <video controls src="${v.src}" poster="https://placehold.co/600x337/000/FFF?text=Sache+Media"></video>
          <div class="video-info">
            <div class="video-title">${escapeHTML(v.title)}</div>
            <button class="like-btn" onclick="likeVideo(${i})" title="Like">&#128077;</button>
            <span class="like-count" id="like-count-${i}">${v.likes}</span>
            <span class="timestamp">${v.timestamp}</span>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    function escapeHTML(str) {
      return str.replace(/[&<>"']/g, function(m) {
        return ({
          '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
        })[m];
      });
    }
    // Like function
    window.likeVideo = function(idx) {
      videos[idx].likes++;
      renderVideos(document.getElementById('search-box').value);
    }

    // Upload
    document.getElementById('video-upload').addEventListener('change', function(e) {
      const file = this.files[0];
      if(file && file.type.startsWith('video/')) {
        const url = URL.createObjectURL(file);
        const title = prompt('Enter a title for your video:', file.name.replace(/\.[^/.]+$/, ""));
        if(title) {
          videos.unshift({
            title: title, src: url, likes: 0, timestamp: new Date().toLocaleString()
          });
          renderVideos(document.getElementById('search-box').value);
        }
      }
      this.value = '';
    });

    // Search
    document.getElementById('search-box').addEventListener('input', function() {
      renderVideos(this.value);
    });

    // Initial render
    renderVideos();
  </script>
</body>
</html>
